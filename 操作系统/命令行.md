# Linux基础

## 1.帮助命令

`man command`   查看命令具体参数

`whatis command` 查看简短说明

`which  command` 查看程序安装路径

`whereis command` 查看程序的搜索路径

whereis命令只能用于程序名的搜索，而且只搜索二进制文件（参数-b）、man说明文件（参数-m）和源代码文件（参数-s）。如果省略参数，则返回所有信息。

## 2.文件及目录管理

- 创建：`mkdir`
- 删除：`rm`
- 删除非空目录：`rm -rf file目录`
- 删除日志 `rm *log `(等价: $find ./ -name “*log” -exec rm {} ;)
- 移动：`mv`
- 复制：`cp (复制目录：cp -r )`

查看当前目录下文件个数:  `find ./ | wc -l`

- 找到文件/目录位置：`cd`
- 切换到上一个工作目录： `cd -`
- 切换到home目录：` cd or cd ~`
- 显示当前路径: `pwd`
- 更改当前工作路径为`path: $cd path`

### 2.1find

查找目标文件夹中是否有obj文件

`find ./ -name "*.o"`

递归当前目录及子目录删除所有.o文件:

`find ./ -name "*.o" -exec rm {} \;`

`locate`比`find`更快 ，因为locate不是实时的，是索引数据库，可以使用`updatedb`更新

###  2.2查看文件内容

`cat` 

`cat -n`   打印 并显示行号 

`more` 按页显示内容

`cat a| more`

`head -5 filename` 显示前5行、

`tail-5 filename `  显示后5行

`diff filename1 filename2` 显示两个文件间差别

### 2.3查找文件内容

```
grep命令

基本格式：find  expression

1.主要参数

[options]主要参数：
－c：只输出匹配行的计数。
－i：不区分大小写
－h：查询多文件时不显示文件名。
－l：查询多文件时只输出包含匹配字符的文件名。
－n：显示匹配行及行号。
－s：不显示不存在或无匹配文本的错误信息。
－v：显示不包含匹配文本的所有行。

pattern正则表达式主要参数：
\： 忽略正则表达式中特殊字符的原有含义。
^：匹配正则表达式的开始行。
$: 匹配正则表达式的结束行。
\<：从匹配正则表达 式的行开始。
\>：到匹配正则表达式的行结束。
[ ]：单个字符，如[A]即A符合要求 。
[ - ]：范围，如[A-Z]，即A、B、C一直到Z都符合要求 。
.：所有的单个字符。
* ：有字符，长度可以为0。

2.实例　 

(1)grep 'test' d*　　#显示所有以d开头的文件中包含 test的行
(2)grep ‘test’ aa bb cc 　　 #显示在aa，bb，cc文件中包含test的行
(3)grep ‘[a-z]\{5\}’ aa 　　#显示所有包含每行字符串至少有5个连续小写字符的字符串的行
(4)grep magic /usr/src　　#显示/usr/src目录下的文件(不含子目录)包含magic的行
(5)grep -r magic /usr/src　　#显示/usr/src目录下的文件(包含子目录)包含magic的行

(6)grep -w pattern files ：只匹配整个单词，而不是字符串的一部分(如匹配’magic’，而不是’magical’)，
```

### 2.4文件与目录权限修改

- 改变文件的拥有者 `chown`
- 改变文件读、写、执行等属性 `chmod`
- 递归子目录修改： `chown -R tuxapp source/`
- 增加脚本可执行权限：` chmod a+x myscript`

  我们就可以使用 **u, g, o** 来代表三种身份的权限！

  +(加入) 

  u+w 

 -(除去) 

  u-w =(设定)

  u=rwx

### 2.5别名

```
ln cc ccAgain :硬连接；删除一个，将仍能找到；
ln -s cc ccTo :符号链接(软链接)；删除源，另一个无法使用；（后面一个ccTo 为新建的文件）
```

### 2.6管道和重定向

- 批处理命令连接执行，使用` |`
- 串联: 使用分号 `;`
- 前面成功，则执行后面一条，否则，不执行:`&&`
- 前面失败，则后一条执行: `||`

重定向

`ls  proc/*.c > list 2> list 将标准输出和标准错误重定向到同一文件；`,1 代表标准输出， 2 代表标准从错误  ， > 相当于 1> 

上一条命令相当于`ls  proc/*.c &> list`

清空文件 `:> a.txt`

在文件后添加  `echo aa >> a.txt`

## 3.文本处理

### 3.1 Find

**按名字搜索  -name**

查找txt和pdf文件

`find . \( -name "*.txt" -o -name "*.pdf" \) -print`

**参数有： ！，-and(-a)，-or(-o)。**

`find . -type d -print  //只列出所有目录`

`find . -maxdepth 1 -type f` 指定搜索深度,打印出当前目录的文件（深度为1）:

**按类型搜索   -type f 文件   l 符号链接   d 目录 **  

实现查找本地目录下的所有二进制文件:

`ls -lrt | awk '{print $9}'|xargs file|grep  ELF| awk '{print $1}'|tr -d ':'`

**按时间搜索**

- -atime 访问时间 (单位是天，分钟单位则是-amin，以下类似）
- -mtime 修改时间 （内容被修改）
- -ctime 变化时间 （元数据或权限变化）

最近第7天被访问过的所有文件:

```
find . -atime 7 -type f -print
```

最近7天内被访问过的所有文件:

```
find . -atime -7 -type f -print
```

查询7天前被访问过的所有文件:

```
find . -atime +7 type f -print
```

**按大小搜索**

w字 k M G 寻找大于2k的文件:

```
find . -type f -size +2k
```

**按权限查找**

```
find . -type f -perm 644 -print //找具有可执行权限的所有文件
```

**按用户查找:**

```
find . -type f -user weber -print// 找用户weber所拥有的文件
```

#### 找到后的后续动作

**1. 删除**

删除当前目录下所有的swp文件:

```
find . -type f -name "*.swp" -delete
```

或者

```
find . -type f -name "*.swp" | xargs rm
```

**2. 执行动作**

